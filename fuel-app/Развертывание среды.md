Сертификаты. [[Certbot]]
Создание сертификата
```bash
certbot certonly --nginx -d ${app}.${domain} -d www.${app}.${domain}
```

Настройка nginx
```ini
upstream ${app}.${domain} {
    server localhost:${port};
}

server {
    server_name ${app}.${domain} www.${app}.${domain};

    location / {
        proxy_pass http://${app}.${domain};
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    location ~* ^.+\.(jpg|jpeg|gif|png|svg|js|css|mp3|ogg|mpeg|avi|zip|gz|bz2|rar|swf|ico|7z|doc|docx|map|ogg|otf|pdf|tff|tif|txt|wav|webp|woff|woff2|xls|xlsx|xml)$ {
        proxy_cache off;
        proxy_pass http://${app}.${domain};
        proxy_set_header Host $host;
    }

    listen 80;
    listen 443 ssl;
    ssl_certificate /etc/letsencrypt/live/${app}.${domain}/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/${app}.${domain}/privkey.pem;
}
```

После изменений нужно 
1. Проверить конфигурацию. 
	```bash
	nginx -t
	```

2. Перезагрузка nginx
	```bash
	systemctl reload nginx
	```

3. Проверить сертификат
	```bash
	openssl s_client -connect ${app}.${domain}:443 -servername ${app}.${domain} < /dev/null | openssl x509 -noout -text | grep "Subject Alternative Name"
	```
